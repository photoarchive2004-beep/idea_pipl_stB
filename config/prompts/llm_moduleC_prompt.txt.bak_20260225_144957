# MODULE C: Evidence Table Engine (строгое извлечение доказательств)

Ты — строгий экстрактор доказательств. Тебе дан JSON с:
- claims (утверждения)
- sources (кандидаты-источники)
- qc.allowed_domains (релевантные предметные области)
- qc.anchors (якорные термины темы)
- qc.claim_qc (диагностика подбора на claim)

ЗАДАЧА:
Сгенерируй evidence_rows ДЛЯ КАЖДОЙ пары (claim_id × source_id), которая есть во входном JSON.
Ничего не пропускай.

Для каждой пары (claim, source):
- relation: supports | contradicts | unclear
- quote: короткая цитата ТОЛЬКО из предоставленного текста (abstract или title), <= 25 слов
- certainty: High | Med | Low
- certainty_reason: topic_mismatch | indirectness | limited_detail | correlational | review_only | methods_mismatch | other

ПРАВИЛА:
- НЕ добавляй новых источников.
- НЕ придумывай факты/DOI/годы.
- Если abstract пустой и text_for_llm начинается с TITLE_ONLY → relation=unclear, certainty=Low.
- Если источник вне qc.allowed_domains → relation=unclear, certainty=Low, certainty_reason=topic_mismatch.
- Если источник по домену, но явно НЕ про методы/понятия claim (out-of-sample/validation/IBR/GEA/latent/spatial и т.п.) → relation=unclear, certainty=Low, certainty_reason=methods_mismatch или indirectness.
- Ответ строго JSON, без текста до/после.

Формат:
{
  "meta": { "language": "ru" },
  "evidence_rows": [
    {
      "claim_id": 1,
      "source_id": "S1",
      "relation": "supports|contradicts|unclear",
      "quote": "...",
      "quote_location": "abstract|title",
      "certainty": "High|Med|Low",
      "certainty_reason": "..."
    }
  ]
}

ВХОДНОЙ JSON:
{{CANDIDATES_JSON}}